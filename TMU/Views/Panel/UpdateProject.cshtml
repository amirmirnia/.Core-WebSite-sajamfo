@model Data.TMU.Model.msc.msc
@using Core.TMU.Convertor
@using Core.TMU.Genarator
@using System.Globalization;
@inject Core.TMU.Service.ITMUService.IUser user
@inject Core.TMU.Service.ITMUService.IGeneric<Data.TMU.Model.User> _guser
@inject Core.TMU.Service.ITMUService.IPermision Permision
@inject Core.TMU.Service.ITMUService.Imsc _msc



@{
    if (Model.CaregouryActivity!="00")
    {
        ViewData["Title"] = _msc.getPricelistbyid(int.Parse(Model.Activity)).Activity;
    }
    else
    {
        ViewData["Title"] = Model.Activity;
    }

    Layout = "~/Views/Shared/_PanelLayout.cshtml";
    var mscpersent = _msc.FindMscPersent(Model.Idmsc);
    var t = PersiannumberTOenglish.PersianToEnglish(Model.Price.Replace("٬", ""));

    //var unitprice = (float.Parse(Model.OnePrice))/float.Parse(Model.factoroffer);

}
<section>
    @*    <input asp-for="CaregouryActivity" type="hidden" id="CaregouryActivity">
    *@    <form asp-action="UpdateProject" method="post">
        <div class="formpanel">
            <div class="headerform">
                @{
                    if (ViewBag.disabel == "متمم")
                    {
                        
                        if (Model.CaregouryActivity!="00")
                        {
                           <p>متمم-@(_msc.getPricelistbyid(int.Parse(Model.Activity)).Activity)</p>
                        }
                        else
                        {
                            <p>متمم-@Model.Activity</p>
                        }
                    }
                    else
                    {
                        if (Model.CaregouryActivity!="00")
                        {
                            <p>مشاهده-@(_msc.getPricelistbyid(int.Parse(Model.Activity)).Activity)</p>
                        }
                        else
                        {
                            <p>مشاهده-@Model.Activity</p>
                        }

                    }
                }

            </div>
            <div class="headerdescription">
                @{
                    if (ViewBag.Description != null)
                    {
                        <p class="mt-1 mb-2"><label>متن ارجاع:</label> @ViewBag.Description</p>

                    }
                }

            </div>
            @{
                //if(Model.Andicator!="0" || ViewBag.disabel == "متمم")
                //{
                //     <input type="hidden" name="activityname" value="@ViewBag.A">
                //     //<input type="hidden"   asp-for="Activity">
                //     <input type="hidden" id="CaregouryActivity" asp-for="CaregouryActivity" >
                //}
            }
            <input asp-for="Idmsc" type="hidden">
            <input asp-for="IdmscM" type="hidden">
            <input asp-for="author" type="hidden">
            <input asp-for="IdAuthor" type="hidden">
            <input asp-for="letter_number" type="hidden">
            <input asp-for="Andicator" type="hidden">
            <input type="hidden" asp-for="number" value="0">
            <input asp-for="deadline" type="hidden">
            <input asp-for="DetaNews" type="hidden">
            <input id="A" value="@ViewBag.A" type="hidden">
            @{
                if(Model.Isclose==false)
                {
                    if(mscpersent!=null && mscpersent.statusstatusface==true)
                {
                    
                    <input name="persent" value="0" type="hidden">
                }

                if (mscpersent == null || mscpersent.PercentUser.Count() < 2 && Permision.GetRoleById(int.Parse(user.FindUser(User.Identity.Name).post)).EndProcess != true)
                {

                    <input name="persent" value="0" type="hidden">
                }
                }
            }
            <div class="bodyF">
                <div class="bodyform">
                    <div>
                        <label>زمان ایجاد</label>
                        <input type="text" asp-for="DetaNews" disabled value="@DateTime.Now.ToPeString("dddd, dd, MMMM,yyyy")" class="form-control">

                    </div>
                    <div>
                        <label>دسته فعالیت</label>
                        <select class="form-control mb-1" id="CaregouryActivity" asp-for="CaregouryActivity" asp-items="@(ViewBag.PriceActivity as SelectList)" readonly=@(Model.Andicator!="0" || ViewBag.disabel == "متمم")>
                            <option value="">انتخاب کنید</option>
                            <option value="00">خرید فاکتوری</option>
                        </select>
                    </div>
                    
                    <div id="Activitymore">
                        <label>فعالیت</label>
                        <select class="form-control mb-1" id="selectActivity" asp-for="Activity" readonly=@(Model.Andicator!="0" || ViewBag.disabel == "متمم")>
                            <option value="">انتخاب کنید</option>
                        </select>
                        <span asp-validation-for="Activity"></span>
                    </div>
                    <div style="display:none" id="Activityone">
                        <label>فعالیت</label>
                        <input type="text" name="activityname" value="@ViewBag.A"  readonly=@(Model.Andicator!="0" || ViewBag.disabel == "متمم")  class="form-control">
                    </div>
                    <div>
                        <label>هزینه هر واحد (ریال)</label>
                        <input asp-for="OnePrice" required oninvalid="this.setCustomValidity('لطفا هزینه واحد را پر کنید')" oninput="this.setCustomValidity('')" type="text" readonly=@(Model.Andicator!="0" || ViewBag.disabel == "متمم") value="@Model.OnePrice" class="form-control Money" id="input2" onchange="sum()" onkeyup="sum()">
                        <span asp-validation-for="OnePrice"></span>
                    </div>
                    <div>
                        <label>هزینه کل (ریال)</label>
                        <input required oninvalid="this.setCustomValidity('لطفا هزینه کل را پر کنید')" oninput="this.setCustomValidity('')" asp-for="Price" readonly=@(Model.Andicator!="0" || ViewBag.disabel == "متمم") type="text" class="form-control Money" id="txtMoney">
                        <span asp-validation-for="Price"></span>
                    </div>

                    <div id="infolocation">
                        <h2>محل اجرا:@Model.Location</h2>
                        @{
                            if (Model.Seri != null)
                            {
                                <h2>سری:@Model.Seri</h2>
                            }
                            if (Model.parcel != null)
                            {
                                <h2>پارسل:@Model.parcel</h2>
                            }
                            if (Model.Well != null)
                            {
                                <h2>سری:@Model.Well</h2>
                            }
                        }
                    </div>

                    <div>
                        <label>محل اجرا</label>
                        <select class="form-control" id="Location" readonly=@(Model.Andicator!="0" || ViewBag.disabel == "متمم") asp-for="Location" aria-label="Default select example" onkeyup="Checklocation(this);" onchange="Checklocation(this);">
                            <option value="فولاد مبارکه">فولاد مبارکه</option>
                            <option value="سری">سری</option>
                            <option value="پارسل">پارسل</option>
                            <option value="چاه">چاه</option>
                        </select>
                    </div>

                </div>
                <div class="bodyform">
                    <div>
                        <label>مهلت اجرا</label>
                        <input autocomplete="off" required  asp-for="deadline"  onclick="PersianDatePicker.Show(this,'@DateTime.Now.ToPeString("yyyy/MM/dd")');" readonly=@(Model.Andicator!="0") disabled=@(Model.Andicator!="0") type="text" class="form-control">
                        <span asp-validation-for="deadline"></span>
                    </div>


                    <div>
                        <label>واحد فعالیت</label>
                        <input required  oninvalid="this.setCustomValidity('لطفا واحد فعالت را پر کنید')" oninput="this.setCustomValidity('')" asp-for="Unit" readonly=@(Model.Andicator!="0" || ViewBag.disabel == "متمم") id="unit" placeholder="واحد" type="text" class="form-control">
                        <span asp-validation-for="Unit"></span>
                    </div>

                    <div>

                        <label>ضریب پیشنهادی</label>
                        <input required oninvalid="this.setCustomValidity('لطفا ضریب پیشنهادی را پر کنید')" oninput="this.setCustomValidity('')"  asp-for="factoroffer" readonly=@(Model.Andicator!="0" || ViewBag.disabel == "متمم") id="factoroffer"  onchange="sum()" onkeyup="sum()"  class="form-control" type="text" placeholder="ضریب پیشنهادی">
                        @*<span asp-validation-for="factoroffer"></span>*@
                    </div>
                    <div>
                        <label>حجم کار</label>
                        <input required oninvalid="this.setCustomValidity('لطفا حجم کار را پر کنید')" oninput="this.setCustomValidity('')"  asp-for="Volume" readonly=@(Model.Andicator!="0") type="number" min="1" placeholder="حجم کار" id="input1" step="0.1" onchange="sum()" onkeyup="sum()" class="form-control">
                        <span asp-validation-for="Volume"></span>
                    </div>
                    @{
                        if (_msc.GetStatusValidition(Model.Idmsc, true, true) != true)
                        {
                            if (Permision.GetRoleById(int.Parse(user.FindUser(User.Identity.Name).post)).EndProcess != true)
                            {
                                <div>
                                    <label>گیرنده</label>
                                    <select name="userreciver" class="form-control" id="inputGroupSelect01" asp-items="@(ViewBag.reciveruser as SelectList)">
                                    </select>
                                </div>
                            }
                        }
                        //else
                        //{
                        //    <input name="userreciver" value="0" type="hidden" />
                        //}
                    }


                    @*@{
                        if (Permision.GetRoleById(int.Parse(user.FindUser(User.Identity.Name).post)).EndProcess != true)
                        {
                        <div>
                        <label>گیرنده</label>
                        <select name="userreciver" class="form-control" id="inputGroupSelect01" asp-items="@(ViewBag.reciveruser as SelectList)">
                        </select>
                        </div>
                        }
                        else
                        {
                        <input name="userreciver" value="0" type="hidden" />
                    *@  @*}*@
                    @* }*@
                    @{
                        if (Permision.GetRoleById(int.Parse(user.FindUser(User.Identity.Name).post)).EndProcess == true || _msc.GetStatusValidition(Model.Idmsc, true, true) == true)
                        {


                            var listpersent = SpelitTag.tag(mscpersent.Percent);
                            var listpersentUser = SpelitTag.tag(mscpersent.PercentUser);
                            var countpersent = listpersent.Count() + 1;
                            var countpersentUser = listpersentUser.Count() + 1;

                            var totalpersent = 0.0;
                            for (int i = 0; i < listpersent.Count(); i++)
                            {
                                totalpersent += float.Parse(listpersent[i]);
                                //totalpersent += float.Parse(listpersent[i].Replace(".","/"));

                            }
                            var ceilingg =float.Parse(Model.Volume)- totalpersent;
                            //var ceilingg =float.Parse(Model.Volume.Replace(".","/"))- totalpersent;
                            //if (listpersent.Count() + 1 != listpersentUser.Count() + 1)
                            //{
                            if (mscpersent != null)
                            {
                                if (listpersent.Last() != Model.Volume)
                                {
                                    var maxceilingg = 0.0;
                                    if (0<ceilingg && ceilingg<1)
                                    {
                                        maxceilingg= Math.Round(ceilingg,1);
                                    }
                                    else
                                    {

                                        maxceilingg = ceilingg;
                                    }

                                    <div class="form-group col-md-12">
                                        <label for="customRange" class="form-label">پیشرفت</label>
                                        <input name="persent" type="range"  min="0" max=@maxceilingg onchange="sumAftherMScPercent()" onkeyup="sumAftherMScPercent()"  step="0.1" value="@((mscpersent.Percent=="0" || countpersent!=countpersentUser)?listpersentUser.Last():listpersent.Last())" class="slider" id="myRange">
                                        <input class="form-control" onchange="sumAftherMScPercent()" onkeyup="sumAftherMScPercent()" id="box" type="number" step="0.1" min="0" max=@maxceilingg value="@((mscpersent.Percent=="0" || countpersent!=countpersentUser)?listpersentUser.Last():listpersent.Last())" />
                                        <p>پیشرفت: <span id="demo"></span></p>
                                    </div>
                                }

                                //}
                            }

                        }

                    }
                </div>

            </div>
            <div class="bodyF" id="SubLocation" style="display: flow-root;">

                <div class="bodyform d-none" id="bodyLocationwell">
                    <label>شماره چاه</label>
                    <div class="d-flex flex-wrap">

                        @{
                            string[] list = { "0" };
                            if (Model.Well != null)
                            {
                                list = SpelitTag.tag(Model.Well);
                            }


                            for (int i = 1; i < 26; i++)
                            {
                                <div class=" custom-checkbox mb-3">
                                    <div class="custom-control custom-switch">
                                        <input type="checkbox" class="custom-control-input" name="Well" id="@i" value="@i" checked="@(list.Contains(i.ToString())!=false)">
                                        <label class="custom-control-label" for="@i">@i</label>
                                    </div>
                                </div>

                            }
                        }
                    </div>
                </div>
                <div class="bodyform d-none" id="bodyLocationSeri">
                    <div class="locationseri">
                        <label>شماره سری</label>
                        <select onchange="getValueParcelseri(this)" class="form-control" asp-for="Seri" aria-label="Default select example">
                            <option value="">انتخاب کنید</option>
                            @{
                                for (int i = 1; i < 9; i++)
                                {

                                    <option value="@i">@i</option>
                                }
                            }
                        </select>
                    </div>
                </div>
                <div class="bodyform d-none" id="bodyLocationparcel">
                    <div>
                        <label>شماره پارسل</label>
                        <div class="d-flex flex-wrap">
                            <div class="Parcel1 d-none" readonly=@( ViewBag.disabel == "متمم") id="bodyparcel1">
                                @{
                                    string[] listparcel = { "0" };
                                    if (Model.parcel != null)
                                    {
                                        listparcel = SpelitTag.tag(Model.parcel);
                                    }
                                }
                                @{

                                    for (int i = 101; i < 181; i++)
                                    {
                                        <div class=" custom-checkbox mb-3">
                                            <div class="custom-control custom-switch">
                                                <input type="checkbox" class="custom-control-input" name="parcel" id="@i" value="@i" checked="@(listparcel.Contains(i.ToString())!=false)">
                                                <label class="custom-control-label" for="@i">@i</label>
                                            </div>
                                        </div>

                                    }

                                }
                            </div>
                            <div class="Parcel2 d-none" readonly=@( ViewBag.disabel == "متمم") id="bodyparcel2">
                                @{

                                    for (int i = 201; i < 265; i++)
                                    {
                                        <div class=" custom-checkbox mb-3">
                                            <div class="custom-control custom-switch">
                                                <input type="checkbox" class="custom-control-input" name="parcel" id="@i" value="@i" checked="@(listparcel.Contains(i.ToString())!=false)">
                                                <label class="custom-control-label" for="@i">@i</label>
                                            </div>
                                        </div>

                                    }

                                }
                            </div>
                            <div class="Parcel3 d-none" readonly=@( ViewBag.disabel == "متمم") id="bodyparcel3">
                                @{

                                    for (int i = 301; i < 369; i++)
                                    {
                                        <div class=" custom-checkbox mb-3">
                                            <div class="custom-control custom-switch">
                                                <input type="checkbox" class="custom-control-input" name="parcel" id="@i" value="@i" checked="@(listparcel.Contains(i.ToString())!=false)">
                                                <label class="custom-control-label" for="@i">@i</label>
                                            </div>
                                        </div>

                                    }

                                }
                            </div>
                            <div class="Parcel4 d-none" readonly=@( ViewBag.disabel == "متمم") id="bodyparcel4">
                                @{

                                    for (int i = 401; i < 466; i++)
                                    {
                                        <div class=" custom-checkbox mb-3">
                                            <div class="custom-control custom-switch">
                                                <input type="checkbox" class="custom-control-input" name="parcel" id="@i" value="@i" checked="@(listparcel.Contains(i.ToString())!=false)">
                                                <label class="custom-control-label" for="@i">@i</label>
                                            </div>
                                        </div>

                                    }

                                }
                            </div>
                            <div class="Parcel5 d-none" readonly=@( ViewBag.disabel == "متمم") id="bodyparcel5">
                                @{

                                    for (int i = 501; i < 550; i++)
                                    {
                                        <div class=" custom-checkbox mb-3">
                                            <div class="custom-control custom-switch">
                                                <input type="checkbox" class="custom-control-input" name="parcel" id="@i" value="@i" checked="@(listparcel.Contains(i.ToString())!=false)">
                                                <label class="custom-control-label" for="@i">@i</label>
                                            </div>
                                        </div>

                                    }

                                }
                            </div>
                            <div class="Parcel6 d-none" readonly=@( ViewBag.disabel == "متمم") id="bodyparcel6">
                                @{

                                    for (int i = 601; i < 635; i++)
                                    {
                                        <div class=" custom-checkbox mb-3">
                                            <div class="custom-control custom-switch">
                                                <input type="checkbox" class="custom-control-input" name="parcel" id="@i" value="@i" checked="@(listparcel.Contains(i.ToString())!=false)">
                                                <label class="custom-control-label" for="@i">@i</label>
                                            </div>
                                        </div>

                                    }

                                }
                            </div>
                            <div class="Parcel7 d-none" readonly=@( ViewBag.disabel == "متمم") id="bodyparcel7">
                                @{

                                    for (int i = 701; i < 782; i++)
                                    {
                                        <div class=" custom-checkbox mb-3">
                                            <div class="custom-control custom-switch">
                                                <input type="checkbox" class="custom-control-input" name="parcel" id="@i" value="@i" checked="@(listparcel.Contains(i.ToString())!=false)">
                                                <label class="custom-control-label" for="@i">@i</label>
                                            </div>
                                        </div>

                                    }

                                }
                            </div>
                            <div class="Parcel8 d-none" readonly=@( ViewBag.disabel == "متمم") id="bodyparcel8">
                                @{

                                    for (int i = 801; i < 807; i++)
                                    {
                                        <div class=" custom-checkbox mb-3">
                                            <div class="custom-control custom-switch">
                                                <input type="checkbox" class="custom-control-input" name="parcel" id="@i" value="@i" checked="@(listparcel.Contains(i.ToString())!=false)">
                                                <label class="custom-control-label" for="@i">@i</label>
                                            </div>
                                        </div>

                                    }

                                }
                            </div>

                        </div>

                    </div>
                </div>
            </div>
            @{
                //if (!_msc.GetStatusValidition(Model.Idmsc, true, true))
                //{
                <div>
                    <label>توضیحات</label>
                    <textarea required oninvalid="this.setCustomValidity('لطفا توضیحات را پر کنید')" oninput="this.setCustomValidity('')" asp-for="Description" class="form-control" rows="2" cols="4" placeholder="توضیحات"></textarea>
                    <span asp-validation-for="Description"></span>
                </div>
                //}
            }
            @{
                if (Model.Andicator == "0" && _guser.GetById(Model.IdAuthor).IdCode != User.Identity.Name)
                {
                    if (user.IsDownLevelUserAutorize(User.Identity.Name))
                    {
                        <div class=" custom-checkbox mb-3">
                            <div class="custom-control custom-switch m-2">
                                <input type="checkbox" class="custom-control-input" name="check" id="check" value="true">
                                <label class="custom-control-label" for="check">برگشت داده شود؟</label>
                            </div>
                        </div>
                    }

                }
            }

            @{

                if (Permision.IsTrueFinalaproval() == true && Permision.IsTruePermitionPrint() == true && Permision.Isendprosecc() == true)
                {
                    if (user.IsUpperLevelUserAutorize(User.Identity.Name) && Permision.GetRoleById(int.Parse(user.FindUser(User.Identity.Name).post)).EndProcess != true)
                    {
                        if (Permision.GetRoleById(int.Parse(user.FindUser(User.Identity.Name).post)).Finalapproval == true && !_msc.GetStatusValidition(Model.Idmsc, true, true))
                        {
                            <p class="mb-4"><label>اندیکاتور:</label> در صورت تایید در اندیکاتور ثبت خواهد شد</p>
                            <hr class="my-4">
                            <button type="submit" class="btn btn-outline-dark m-3">ثبت و ارجاع</button>

                        }
                        else
                        {
                            <button type="submit" class="btn btn-outline-secondary m-3"> ارجاع</button>

                        }
                    }
                    else
                    {
                        if (Permision.GetRoleById(int.Parse(user.FindUser(User.Identity.Name).post)).EndProcess == true && Permision.Issignuchure() == true)
                        {
                            var role = Permision.Getsignuchure();
                            var userreciver = _msc.GetUserSenderinMscuserToUserWhitRole(role, Model.Idmsc);
                            if (userreciver == null)
                            {
                                userreciver = _msc.GetUserSenderinMscuserToUserWhitRole(role, Model.IdmscM);
                            }
                            <input name="userreciver" value="@userreciver" type="hidden" />
                            <button type="submit" class="btn btn-outline-secondary m-3"> ارجاع</button>

                        }
                        else
                        {
                            <p class="mt-2">کاربری با سطح دسترسی بالا تر از شما جهت ارجاع نامه وجود ندارد</p>
                        }

                    }

                }
                else
                {
                    <p class="mt-2">کاربری جهت تایید و ثبت در اندیکاتور، به عنوان تایید کننده یا اتمام چرخه مشخص نشده است</p>
                    <p class="mt-2">به بخش تعریف و تغییر نقشهای پرسنلی مراجعه نمایید.</p>
                }

            }

            <div class="headerform">
                <p>اطلاعات خواسته شده را تکمیل نمایید</p>
            </div>
        </div>
    </form>
</section>

<script src="~/js/jquery-1.9.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
<script>


            document.getElementById("CaregouryActivity").addEventListener("click", insertValue);

                 function insertValue() {
                  // یافتن المان select با استفاده از آیدی
                  let select = document.getElementById("CaregouryActivity");
                  // خواندن مقدار select
                  let value = select.value;
                  if(value=="00")
                  {
                       document.getElementById("Activityone").style.display="block";
                       document.getElementById("Activitymore").style.display="none";
                      document.getElementById("factoroffer").removeAttribute("readonly");
                      document.getElementById("txtMoney").removeAttribute("readonly");
                      document.getElementById("input2").removeAttribute("readonly");
                      document.getElementById("unit").removeAttribute("readonly");
                     document.getElementById("factoroffer").value="";
                     document.getElementById("txtMoney").value="";
                     document.getElementById("input2").value="";
                     document.getElementById("input1").value="";
                     document.getElementById("unit").value="";
                  }
                  else
                  {
                      document.getElementById("Activityone").style.display="none"
                       document.getElementById("Activitymore").style.display="block"
                      document.getElementById("factoroffer").setAttribute("readonly", "readonly");
                      document.getElementById("txtMoney").setAttribute("readonly", "readonly");
                      document.getElementById("input2").setAttribute("readonly", "readonly");
                      document.getElementById("unit").setAttribute("readonly", "readonly");
                  }
                  //// یافتن المان input با استفاده از آیدی
                  //let input = document.getElementById("selectactivityhiden");
                  //// درج مقدار select در input
                  //input.value = value;
               }



               $("#selectActivity").change(function () {
                         var dropdown = document.getElementById("selectActivity");
                         var selectedValue = dropdown.options[dropdown.selectedIndex].value;
                         $("#factoroffer").empty();
                         $("#input2").empty();
                         document.getElementById("input1").value = "";
                         document.getElementById("txtMoney").value = "";
                         $("#unit").empty();
                                 $.ajax({
                                 url: '@Url.Action("factoroffer","Panel")',
                                 data: { id:selectedValue },
                                 success: function(result) {
                                     $('#factoroffer').val(result);

                                 }
                             });
                             $.ajax({
                                 url: '@Url.Action("price","Panel")',
                                 data: { id:selectedValue },
                                 success: function(result) {
                                     $('#input2').val(result);
                                 }
                             });
                             $.ajax({
                                 url: '@Url.Action("unit","Panel")',
                                 data: { id:selectedValue },
                                 success: function(result) {
                                     $('#unit').val(result);
                                 }
                             });

                     });


            window.onload=function()
            {

                
                  // یافتن المان select با استفاده از آیدی
                  let select = document.getElementById("CaregouryActivity");
                  // خواندن مقدار select
                  let value = select.value;
                  if(value=="00")
                  {
                      document.getElementById("Activityone").style.display="block";
                       document.getElementById("Activitymore").style.display="none";
                      document.getElementById("factoroffer").removeAttribute("readonly");
                      document.getElementById("txtMoney").removeAttribute("readonly");
                      document.getElementById("input2").removeAttribute("readonly");
                      document.getElementById("unit").removeAttribute("readonly");
                  }
                  else
                  {
                      document.getElementById("Activityone").style.display="none"
                       document.getElementById("Activitymore").style.display="block"
                      document.getElementById("factoroffer").setAttribute("readonly", "readonly");
                      document.getElementById("txtMoney").setAttribute("readonly", "readonly");
                      document.getElementById("input2").setAttribute("readonly", "readonly");
                      document.getElementById("unit").setAttribute("readonly", "readonly");
                  }


                $("#selectActivity").empty();
                $.getJSON("/Panel/GetActivityUnderPriceActivity/" + $("#CaregouryActivity :selected").val(),
                function (data) {

                $.each(data,
                function () {
                    if(this.value==document.getElementById("A").value){
                         $("#selectActivity").append('<option selected value=' + this.value + '>' + this.text + '</option>');
                    }else{
                         $("#selectActivity").append('<option value=' + this.value + '>' + this.text + '</option>');
                    }


                });

                });


            }


              $("#CaregouryActivity").change(function () {
                $("#selectActivity").empty();
                $.getJSON("/Panel/GetActivityUnderPriceActivity/" + $("#CaregouryActivity :selected").val(),
                function (data) {

                $.each(data,
                function () {
                $("#selectActivity").append('<option value=' + this.value + '>' + this.text + '</option>');

                });

                });
                });




                var slider=document.getElementById("myRange");
                var box=document.getElementById("box");
                var output = document.getElementById("demo");
                output.innerHTML = slider.value;
                //update text input
                slider.oninput=function(){
                    box.value=this.value;
                    output.innerHTML = this.value;
                }
                //update slider input
                box.oninput=function(){
                    slider.value=this.value;
                    output.innerHTML = this.value;
                }

            //function getValueActivity() {
                //var dropdown = document.getElementById("selectActivity");
                //var selectedValue = dropdown.options[dropdown.selectedIndex].value;

                 

    function Checklocation(that){
          var elementC = document.getElementById("bodyLocationwell");
          var elementS = document.getElementById("bodyLocationSeri");
          var elementP = document.getElementById("bodyLocationparcel");
          var elementBL = document.getElementById("SubLocation");

          if (that.value == "فولاد مبارکه") {

              elementBL.className = "bodyF d-none";
              elementC.className = "bodyform d-none";
              elementP.className = "bodyform d-none";
              elementS.className = "bodyform d-none";
           }
          if (that.value == "چاه") {
              elementBL.className = "bodyF";
              elementC.className = "bodyform";
              elementP.className = "bodyform d-none";
              elementS.className = "bodyform d-none";
           }
          if (that.value == "چاه") {
              elementBL.className = "bodyF";
              elementC.className = "bodyform";
              elementP.className = "bodyform d-none";
              elementS.className = "bodyform d-none";
           }

           if (that.value == "سری") {
              elementBL.className = "bodyF";
              elementS.className = "bodyform";
              elementC.className = "bodyform d-none";
              elementP.className = "bodyform d-none";
           }
           if (that.value == "پارسل") {
              elementBL.className = "bodyF";
              elementP.className = "bodyform";
              elementS.className = "bodyform";
              elementC.className = "bodyform d-none";

           }

        }

         function getValueParcelseri(that)
       {
          var elementparcel1 = document.getElementById("bodyparcel1");
          var elementparcel2 = document.getElementById("bodyparcel2");
          var elementparcel3 = document.getElementById("bodyparcel3");
          var elementparcel4 = document.getElementById("bodyparcel4");
          var elementparcel5 = document.getElementById("bodyparcel5");
          var elementparcel6 = document.getElementById("bodyparcel6");
          var elementparcel7 = document.getElementById("bodyparcel7");
          var elementparcel8 = document.getElementById("bodyparcel8");

           if (that.value == "1") {
              elementparcel1.className = "Parcel1";
              elementparcel2.className = "Parcel2 d-none";
              elementparcel3.className = "Parcel3 d-none";
              elementparcel4.className = "Parcel4 d-none";
              elementparcel5.className = "Parcel5 d-none";
              elementparcel6.className = "Parcel6 d-none";
              elementparcel7.className = "Parcel7 d-none";
              elementparcel8.className = "Parcel8 d-none";

           }
          if (that.value == "2") {
              elementparcel1.className = "Parcel1 d-none";
              elementparcel2.className = "Parcel2 ";
              elementparcel3.className = "Parcel3 d-none";
              elementparcel4.className = "Parcel4 d-none";
              elementparcel5.className = "Parcel5 d-none";
              elementparcel6.className = "Parcel6 d-none";
              elementparcel7.className = "Parcel7 d-none";
              elementparcel8.className = "Parcel8 d-none";
           }
          if (that.value == "3") {
              elementparcel1.className = "Parcel1 d-none";
              elementparcel2.className = "Parcel2 d-none";
              elementparcel3.className = "Parcel3 ";
              elementparcel4.className = "Parcel4 d-none";
              elementparcel5.className = "Parcel5 d-none";
              elementparcel6.className = "Parcel6 d-none";
              elementparcel7.className = "Parcel7 d-none";
              elementparcel8.className = "Parcel8 d-none";
           }

           if (that.value == "4") {
              elementparcel1.className = "Parcel1 d-none";
              elementparcel2.className = "Parcel2 d-none";
              elementparcel3.className = "Parcel3 d-none";
              elementparcel4.className = "Parcel4 ";
              elementparcel5.className = "Parcel5 d-none";
              elementparcel6.className = "Parcel6 d-none";
              elementparcel7.className = "Parcel7 d-none";
              elementparcel8.className = "Parcel8 d-none";;
           }
           if (that.value == "5") {
              elementparcel1.className = "Parcel1 d-none";
              elementparcel2.className = "Parcel2 d-none";
              elementparcel3.className = "Parcel3 d-none";
              elementparcel4.className = "Parcel4 d-none";
              elementparcel5.className = "Parcel5";
              elementparcel6.className = "Parcel6 d-none";
              elementparcel7.className = "Parcel7 d-none";
              elementparcel8.className = "Parcel8 d-none";

           }
           if (that.value == "6") {
              elementparcel1.className = "Parcel1 d-none";
              elementparcel2.className = "Parcel2 d-none";
              elementparcel3.className = "Parcel3 d-none";
              elementparcel4.className = "Parcel4 d-none";
              elementparcel5.className = "Parcel5 d-none";
              elementparcel6.className = "Parcel6";
              elementparcel7.className = "Parcel7 d-none";
              elementparcel8.className = "Parcel8 d-none";

           }
           if (that.value == "7") {
              elementparcel1.className = "Parcel1 d-none";
              elementparcel2.className = "Parcel2 d-none";
              elementparcel3.className = "Parcel3 d-none";
              elementparcel4.className = "Parcel4 d-none";
              elementparcel5.className = "Parcel5 d-none";
              elementparcel6.className = "Parcel6 d-none";
              elementparcel7.className = "Parcel7";
              elementparcel8.className = "Parcel8 d-none";

           }
           if (that.value == "8") {
              elementparcel1.className = "Parcel1 d-none";
              elementparcel2.className = "Parcel2 d-none";
              elementparcel3.className = "Parcel3 d-none";
              elementparcel4.className = "Parcel4 d-none";
              elementparcel5.className = "Parcel5 d-none";
              elementparcel6.className = "Parcel6 d-none";
              elementparcel7.className = "Parcel7 d-none";
              elementparcel8.className = "Parcel8";

           }


       }
</script>
<script>

    function Showpdf(id) {

      document.getElementById("embed").src = "/Status-face/Pdf/"+document.getElementById(id).value+".pdf";
    }


              function sum()
            {
             var r= parseFloat(document.getElementById("input1").value) * parseInt(document.getElementById("input2").value)*parseFloat(document.getElementById("factoroffer").value);
            document.getElementById("txtMoney").value = new Intl.NumberFormat('fa-IR').format(r);

            }
             function sumAftherMScPercent()
            {
             var r= parseFloat(document.getElementById("box").value) * parseInt(document.getElementById("input2").value)*parseFloat(document.getElementById("factoroffer").value);
            document.getElementById("txtMoney").value = new Intl.NumberFormat('fa-IR').format(r);

            }



</script>

